version: '3.8'

services:
  matching-engine:
    build: .
    image: zig-matching-engine:latest
    container_name: matching-engine
    ports:
      - "1234:1234"      # TCP
      - "1235:1235/udp"  # UDP
      - "1236:1236/udp"  # Multicast
    environment:
      - ENGINE_TCP_ENABLED=true
      - ENGINE_TCP_PORT=1234
      - ENGINE_UDP_ENABLED=true
      - ENGINE_UDP_PORT=1235
      - ENGINE_MCAST_ENABLED=true
      - ENGINE_MCAST_GROUP=239.255.0.1
      - ENGINE_MCAST_PORT=1236
    restart: unless-stopped
    networks:
      - trading-net
    # For multicast support
    # network_mode: host

networks:
  trading-net:
    driver: bridge

